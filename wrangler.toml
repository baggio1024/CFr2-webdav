name = "cf-r2-webdav"
main = "src/index.ts"
compatibility_date = "2025-12-09"

[vars]
USERNAME = "_user"
PASSWORD = "_pass" # 兼容旧版；推荐改用 PASSWORD_HASH
PASSWORD_HASH = "_replace_with_pbkdf2_hash_"
JWT_SECRET = "_replace_with_random_secret_"
WORKER_URL = "https://your-worker.workers.dev"
MAX_FILE_SIZE = "104857600"  # 100MB
STORAGE_QUOTA = "10737418240" # 10GB
DEMO_MODE = "false"
BUCKET_NAME = "dev-bucket"

[[r2_buckets]]
binding = "BUCKET"
bucket_name = "dev-bucket"

[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "your-rate-limit-kv-id"

[[kv_namespaces]]
binding = "QUOTA_KV"
id = "your-quota-kv-id"

[[kv_namespaces]]
binding = "TOTP_KV"
id = "your-totp-kv-id"

# Optional: Dedicated KV for WebAuthn Passkeys (Stage 3)
# If not configured, WebAuthn will fall back to TOTP_KV
# Uncomment to create a separate namespace:
# [[kv_namespaces]]
# binding = "AUTH_KV"
# id = "your-auth-kv-id"  # Run: wrangler kv:namespace create "AUTH_KV"
